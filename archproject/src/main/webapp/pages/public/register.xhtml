<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Arch Project - Register</title>

	<h:outputStylesheet library="css" name="normalize.css" />
	<h:outputStylesheet library="css" name="bgasparotto-register.css" />
</h:head>

<h:body>
	<h:form>
		<p:panel styleClass="bg-register-panelGridCenter"
			header="Create an account">
			<h:panelGrid id="registerPanel" columns="1">

				<p:outputLabel value="Username" />
				<p:inputText id="username"
					value="#{userMb.user.credential.authentication.login.username}"
					validator="#{usernameValidator.validate}"
					styleClass="bg-register-input">
					<p:ajax update="messageUsername" event="keyup" />
				</p:inputText>
				<p:message id="messageUsername" for="username" display="text" />

				<p:outputLabel value="E-mail" />
				<p:inputText id="email"
					value="#{userMb.user.credential.authentication.login.email}"
					validator="#{emailValidator.validate}"
					styleClass="bg-register-input">
					<p:ajax update="messageEmail" event="blur" />
				</p:inputText>
				<p:message id="messageEmail" for="email" display="text" />

				<p:outputLabel value="Password" />
				<p:password id="password" match="confirmPassword"
					validatorMessage="Passwords must match"
					styleClass="bg-register-input" feedback="true" />
				<p:message for="password" display="text" />

				<p:outputLabel value="Confirm Password" />
				<p:password id="confirmPassword"
					value="#{userMb.user.credential.authentication.password.value}"
					styleClass="bg-register-input" />
				<p:message for="confirmPassword" display="text" />
			</h:panelGrid>
			<p:spacer width="100" height="5" />
			<br />
			<p:commandButton value="Register"
				action="#{userMb.register(userMb.user.credential.authentication)}" update="registerPanel"
				icon="ui-icon-check" />
		</p:panel>
	</h:form>
</h:body>
</html>